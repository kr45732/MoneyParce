{% extends 'base.html' %}
{% block content %}
    <header class="masthead bg-index text-white text-center py-4">
        <div class="container d-flex align-items-center flex-column pt-2">
            <h1 class="section-title">Income and Expenses</h1>
        </div>
    </header>
    <main>
        <h2>Expenses</h2>
        <ul>
            {% for expense in expenses %}
                <li style="display: flex; align-items: center; gap: 4px">
                    <p style="margin: 0">{{ expense.date }} - {{ expense.description }}: ${{ expense.amount }} ({{ expense.category }})</p>
                     <form method="post" action="{% url 'transactions.remove_transaction' 'expense' expense.id %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                </li>

            {% empty %}
                <li>No expenses found.</li>
            {% endfor %}
        </ul>

        <h2>Incomes</h2>
        <ul>
            {% for income in incomes %}
                <li style="display: flex; align-items: center; gap: 4px">
                    <p style="margin: 0">{{ income.date }} - {{ income.description }}: ${{ income.amount }}</p>
                    <form method="post" action="{% url 'transactions.remove_transaction' 'income' income.id %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                </li>
            {% empty %}
                <li>No incomes found.</li>
            {% endfor %}
        </ul>

        <div>
            <h1>Add Transaction</h1>
            <h2>Add Expense</h2>
            <form method="post" action="{% url 'transactions.add_transaction' %}">
                {% csrf_token %}
                {{ expense_form.as_p }}
                <button type="submit" name="add_expense">Add Expense</button>
            </form>

            <h2>Add Income</h2>
            <form method="post" action="{% url 'transactions.add_transaction' %}">
                {% csrf_token %}
                {{ income_form.as_p }}
                <button type="submit" name="add_income">Add Income</button>
            </form>
        </div>
    </main>

{% endblock content %}